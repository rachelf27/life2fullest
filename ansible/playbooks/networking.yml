- name: Provision AWS Networking resources
  hosts: localhost
  become: true
  tasks:
    - name: Print the working directory
      command: ls -l
      register: test
    - debug: msg={{ test.stdout }}
          
    - name: Run terraform init for Networking resources
      command: terraform init
      args:
        chdir: "{{ playbook_dir }}/../../terraform/networking"

    - name: Run terraform plan for Networking resources
      command: terraform plan
      args:
        chdir: "{{ playbook_dir }}/../../terraform/networking"

    - name: Run terraform apply to create networking infrastructure
      command: terraform apply -auto-approve
      args:
        chdir: "{{ playbook_dir }}/../../terraform/networking"
